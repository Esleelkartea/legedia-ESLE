<?php
// auto-generated by sfAdvancedAdmin
// date: 2008/01/10 11:37:55
?>
<?php use_helper('Object') ?>

<div class="sf_admin_filters">
<?php echo form_tag('sesionesLog/list', array('method' => 'get')) ?>

  <fieldset>
    <h2><?php echo __('filters') ?></h2>
<!--
    <div class="form-row">
    <label for="id_log"><?php echo __('Log') ?>:</label>
    <div class="content">
    <?php echo input_tag('filters[id_log]', isset($filters['id_log']) ? $filters['id_log'] : null, array (
  'size' => '15'
)) ?>
    </div>
    </div>
-->
        <div class="form-row">
    <label for="id_sesion"><?php echo __($labels['log{id_sesion}']) ?></label>
    <div class="content">
    <?php echo input_tag('filters[id_sesion]', isset($filters['id_sesion']) ? $filters['id_sesion'] : null, array (
  'size' => '15'
)) ?>
    </div>
    </div>
        <div class="form-row">
    <label for="fecha"><?php echo __($labels['log{fecha}']) ?></label>
    <div class="content">
    <?php echo input_date_range_tag('filters[fecha]', isset($filters['fecha']) ? $filters['fecha'] : null, array (
  'rich' => true,
  'withtime' => true,
  'calendar_button_img' => '/sf/sf_admin/images/date.png',
  'date_format' => 'dd/MM/yyyy HH:mm',
  'size' => '9'
)) ?>
    </div>
    </div>

        <div class="form-row">
    <label for="modulo"><?php echo __($labels['log{modulo}']) ?></label>
    <div class="content">
    <?php /*echo input_tag('filters[modulo]', isset($filters['modulo']) ? $filters['modulo'] : null, array (
  'size' => 15,
)); */
        $conexion = Propel::getConnection();
        $consulta = "SELECT DISTINCT(modulo) FROM sesion_log WHERE modulo IS NOT NULL";
        if (isset($filters['id_sesion'])) $consulta .= " AND id_sesion = '".$filters['id_sesion']."'";
        $consulta .= " ORDER BY modulo";

        $sentencia = $conexion->prepare($consulta);
        $sentencia->execute();
     
     ?>
     <select name="filters[modulo]" id="filters_modulo">
     	   <option value="" <?php if (!isset($filters['modulo'])) echo 'selected'?>></option>
  <?php  while($resulset = $sentencia->fetch())   { ?>
			<option value="<?php echo $resulset['modulo']?>" <?php if (isset($filters['modulo']) && $filters['modulo']  == $resulset['modulo']) echo 'selected'?>><?php echo $resulset['modulo']?></option>
     <?php } ?>
     
     </select>


    </div>
    </div>

        <div class="form-row">
    <label for="accion"><?php echo __($labels['log{accion}']) ?></label>
    <div class="content">
    <?php /*echo input_tag('filters[accion]', isset($filters['accion']) ? $filters['accion'] : null, array (
  'size' => 15,
)) */

        $conexion = Propel::getConnection();
        $consulta = "SELECT DISTINCT(accion) FROM sesion_log WHERE accion IS NOT NULL";
        if (isset($filters['id_sesion'])) $consulta .= " AND id_sesion = '".$filters['id_sesion']."'";
        $consulta .= " ORDER BY accion";

        $sentencia = $conexion->prepare($consulta);
        $sentencia->execute();
     ?>
     <select name="filters[accion]" id="filters_accion">
         <option value="" <?php if (!isset($filters['accion'])) echo 'selected'?>></option>
	   <?php  while($resulset = $sentencia->fetch())   { ?>
			<option value="<?php echo $resulset['accion']?>" <?php  if (isset($filters['accion']) && $filters['accion'] == $resulset['accion']) echo 'selected'?>><?php echo $resulset['accion'] ?></option>
     <?php } ?>
     
     </select>


    </div>
    </div>

      </fieldset>

  <ul class="sf_admin_actions">
    <li><?php echo button_to(__('reset'), 'SesionesLog/list?filter=filter', 'class=sf_admin_action_reset_filter') ?></li>
    <li><?php echo submit_tag(__('filter'), 'name=filter class=sf_admin_action_filter') ?></li>
  </ul>

</form>
</div>
